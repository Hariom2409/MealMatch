(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[732],{6065:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/donor/create",function(){return a(1478)}])},6346:function(e,s,a){"use strict";var n=a(3967),r=a.n(n),t=a(7294),i=a(7400),l=a(5893);let c=t.forwardRef((e,s)=>{let{bsPrefix:a,variant:n,animation:t="border",size:c,as:d="div",className:o,...h}=e;a=(0,i.vE)(a,"spinner");let u="".concat(a,"-").concat(t);return(0,l.jsx)(d,{ref:s,...h,className:r()(o,u,c&&"".concat(u,"-").concat(c),n&&"text-".concat(n))})});c.displayName="Spinner",s.Z=c},1478:function(e,s,a){"use strict";a.r(s);var n=a(5893),r=a(7294),t=a(7375),i=a(6346),l=a(9101),c=a(8070),d=a(2121),o=a(525),h=a(6236),u=a(6720),x=a(1163),m=a(3628),j=a(6197),p=a(2914);s.default=()=>{let e=(0,x.useRouter)(),{currentUser:s}=(0,j.a)(),[a,b]=(0,r.useState)(!1),[g,N]=(0,r.useState)(null),[Z,f]=(0,r.useState)(!1),[v,y]=(0,r.useState)(""),[C,w]=(0,r.useState)(""),[k,S]=(0,r.useState)(""),[E,D]=(0,r.useState)(""),[_,P]=(0,r.useState)(""),[G,L]=(0,r.useState)(""),[T,q]=(0,r.useState)(""),[A,F]=(0,r.useState)([]),[I,O]=(0,r.useState)(""),M=new Date().toISOString().split("T")[0];(0,r.useEffect)(()=>{if(!s){e.push("/login?redirect=/donor/create");return}if("donor"!==s.role){e.push("/");return}s.address&&D(s.address)},[s,e]);let B=async s=>{s.preventDefault(),b(!0),N(null);try{if(!v||!C||!k||!E||!_||!G)throw Error("Please fill in all required fields");if(new Date("".concat(_,"T").concat(G))<=new Date)throw Error("Expiry time must be in the future");await new Promise(e=>setTimeout(e,1e3)),f(!0),b(!1),setTimeout(()=>{e.push("/donor/dashboard")},2e3)}catch(e){N(e.message||"An error occurred while posting your donation"),b(!1)}},R=e=>{A.includes(e)?F(A.filter(s=>s!==e)):F([...A,e])};return s&&"donor"===s.role?(0,n.jsx)(m.Z,{title:"Post Food Donation - MealMatch",description:"Share your excess food with those in need",children:(0,n.jsx)(t.Z,{className:"py-5",children:(0,n.jsx)(l.Z,{className:"justify-content-center",children:(0,n.jsx)(c.Z,{lg:8,children:(0,n.jsx)(d.Z,{className:"border-0 shadow-sm",children:(0,n.jsxs)(d.Z.Body,{className:"p-4 p-md-5",children:[(0,n.jsx)("h1",{className:"h3 mb-4 text-center",children:"Post Food Donation"}),g&&(0,n.jsx)(o.Z,{variant:"danger",className:"mb-4",children:g}),Z?(0,n.jsxs)(o.Z,{variant:"success",children:[(0,n.jsx)(o.Z.Heading,{children:"Donation Posted Successfully!"}),(0,n.jsx)("p",{children:"Thank you for your generosity. Your donation has been posted and will be visible to nearby NGOs."}),(0,n.jsx)("p",{className:"mb-0",children:"Redirecting to your dashboard..."})]}):(0,n.jsx)(h.Z,{onSubmit:B,children:(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(c.Z,{xs:12,children:(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,n.jsx)(p.yQ2,{className:"text-success me-2"}),(0,n.jsx)("h2",{className:"h5 mb-0",children:"Food Details"})]}),(0,n.jsxs)(h.Z.Group,{className:"mb-3",children:[(0,n.jsxs)(h.Z.Label,{children:["Title ",(0,n.jsx)("span",{className:"text-danger",children:"*"})]}),(0,n.jsx)(h.Z.Control,{type:"text",placeholder:"E.g., Fresh Vegetables, Baked Goods, etc.",value:v,onChange:e=>y(e.target.value),required:!0})]}),(0,n.jsxs)(h.Z.Group,{className:"mb-3",children:[(0,n.jsxs)(h.Z.Label,{children:["Quantity ",(0,n.jsx)("span",{className:"text-danger",children:"*"})]}),(0,n.jsx)(h.Z.Control,{type:"text",placeholder:"E.g., 5 kg, 10 servings, 3 boxes, etc.",value:C,onChange:e=>w(e.target.value),required:!0})]}),(0,n.jsxs)(h.Z.Group,{className:"mb-3",children:[(0,n.jsxs)(h.Z.Label,{children:["Description ",(0,n.jsx)("span",{className:"text-danger",children:"*"})]}),(0,n.jsx)(h.Z.Control,{as:"textarea",rows:3,placeholder:"Describe the food items, including any allergens or dietary information",value:k,onChange:e=>S(e.target.value),required:!0})]}),(0,n.jsxs)(h.Z.Group,{className:"mb-3",children:[(0,n.jsx)(h.Z.Label,{children:"Tags"}),(0,n.jsx)("div",{className:"mb-2",children:["fruits","vegetables","dairy","bakery","prepared meals","canned goods","grains","beverages","snacks","desserts"].map(e=>(0,n.jsx)(u.Z,{variant:A.includes(e)?"success":"outline-success",size:"sm",className:"me-2 mb-2",onClick:()=>R(e),children:e},e))}),(0,n.jsxs)("div",{className:"d-flex",children:[(0,n.jsx)(h.Z.Control,{type:"text",placeholder:"Add custom tag",value:I,onChange:e=>O(e.target.value),className:"me-2"}),(0,n.jsx)(u.Z,{variant:"outline-secondary",onClick:()=>{I&&!A.includes(I)&&(F([...A,I]),O(""))},disabled:!I,children:"Add"})]})]})]})}),(0,n.jsx)(c.Z,{xs:12,children:(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,n.jsx)(p.Nh4,{className:"text-success me-2"}),(0,n.jsx)("h2",{className:"h5 mb-0",children:"Pickup Information"})]}),(0,n.jsxs)(h.Z.Group,{className:"mb-3",children:[(0,n.jsxs)(h.Z.Label,{children:["Location ",(0,n.jsx)("span",{className:"text-danger",children:"*"})]}),(0,n.jsx)(h.Z.Control,{type:"text",placeholder:"Enter address or location for pickup",value:E,onChange:e=>D(e.target.value),required:!0})]}),(0,n.jsxs)(h.Z.Group,{className:"mb-3",children:[(0,n.jsx)(h.Z.Label,{children:"Pickup Instructions"}),(0,n.jsx)(h.Z.Control,{as:"textarea",rows:2,placeholder:"Any special instructions for pickup (e.g., 'Ask for manager', 'Use back entrance')",value:T,onChange:e=>q(e.target.value)})]})]})}),(0,n.jsx)(c.Z,{xs:12,children:(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,n.jsx)(p.IiJ,{className:"text-success me-2"}),(0,n.jsx)("h2",{className:"h5 mb-0",children:"Expiry Information"})]}),(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(c.Z,{md:6,children:(0,n.jsxs)(h.Z.Group,{className:"mb-3",children:[(0,n.jsxs)(h.Z.Label,{children:["Expiry Date ",(0,n.jsx)("span",{className:"text-danger",children:"*"})]}),(0,n.jsx)(h.Z.Control,{type:"date",min:M,value:_,onChange:e=>P(e.target.value),required:!0})]})}),(0,n.jsx)(c.Z,{md:6,children:(0,n.jsxs)(h.Z.Group,{className:"mb-3",children:[(0,n.jsxs)(h.Z.Label,{children:["Expiry Time ",(0,n.jsx)("span",{className:"text-danger",children:"*"})]}),(0,n.jsx)(h.Z.Control,{type:"time",value:G,onChange:e=>L(e.target.value),required:!0})]})})]})]})}),(0,n.jsxs)(c.Z,{xs:12,children:[(0,n.jsxs)(o.Z,{variant:"info",className:"d-flex align-items-start",children:[(0,n.jsx)(p.DAO,{className:"me-2 mt-1"}),(0,n.jsx)("div",{children:"By posting this donation, you confirm that the food is safe for consumption until the specified expiry time."})]}),(0,n.jsxs)("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end mt-4",children:[(0,n.jsx)(u.Z,{variant:"secondary",onClick:()=>e.push("/donor/dashboard"),disabled:a,className:"px-4",children:"Cancel"}),(0,n.jsx)(u.Z,{type:"submit",variant:"success",disabled:a,className:"px-4",children:a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Posting..."]}):"Post Donation"})]})]})]})})]})})})})})}):(0,n.jsx)(m.Z,{title:"Loading - MealMatch",children:(0,n.jsx)(t.Z,{className:"py-5 text-center",children:(0,n.jsx)(i.Z,{animation:"border",variant:"success"})})})}}},function(e){e.O(0,[445,999,330,728,628,888,774,179],function(){return e(e.s=6065)}),_N_E=e.O()}]);