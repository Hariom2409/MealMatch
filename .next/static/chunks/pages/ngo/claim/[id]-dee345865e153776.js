(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[171],{6231:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ngo/claim/[id]",function(){return a(2197)}])},3280:function(e,s,a){"use strict";var t=a(3967),i=a.n(t),n=a(7294),l=a(7400),r=a(5893);let c=n.forwardRef((e,s)=>{let{bsPrefix:a,bg:t="primary",pill:n=!1,text:c,className:o,as:d="span",...m}=e,h=(0,l.vE)(a,"badge");return(0,r.jsx)(d,{ref:s,...m,className:i()(o,h,n&&"rounded-pill",c&&"text-".concat(c),t&&"bg-".concat(t))})});c.displayName="Badge",s.Z=c},6346:function(e,s,a){"use strict";var t=a(3967),i=a.n(t),n=a(7294),l=a(7400),r=a(5893);let c=n.forwardRef((e,s)=>{let{bsPrefix:a,variant:t,animation:n="border",size:c,as:o="div",className:d,...m}=e;a=(0,l.vE)(a,"spinner");let h="".concat(a,"-").concat(n);return(0,r.jsx)(o,{ref:s,...m,className:i()(d,h,c&&"".concat(h,"-").concat(c),t&&"text-".concat(t))})});c.displayName="Spinner",s.Z=c},2197:function(e,s,a){"use strict";a.r(s);var t=a(5893),i=a(7294),n=a(7375),l=a(6346),r=a(525),c=a(6720),o=a(9101),d=a(8070),m=a(2121),h=a(3280),x=a(6236),u=a(2914),j=a(1163),p=a(1664),b=a.n(p),f=a(3628),N=a(6197);let g=e=>({id:e,title:"Fresh Produce",quantity:"40 kg",description:"Mixed vegetables and fruits including carrots, potatoes, apples, and oranges. All items are fresh and were received this morning. Perfect for soup kitchens or community meal preparation.",donorName:"Green Market",donorPhone:"555-123-4567",donorEmail:"contact@greenmarket.com",distance:"1.2 km",location:"123 Main Street, Downtown",fullAddress:"123 Main Street, Downtown, Cityville, ST 12345",expiryTime:new Date(Date.now()+864e5),createdAt:new Date(Date.now()-108e5),tags:["fruits","vegetables","fresh"],images:["/images/sample-food1.jpg","/images/sample-food2.jpg"],pickupInstructions:"Please enter through the back door and ask for the manager. Bring your own containers if possible.",availablePickupTimes:[{id:"1",time:new Date(Date.now()+72e5)},{id:"2",time:new Date(Date.now()+18e6)},{id:"3",time:new Date(Date.now()+288e5)}]}),v=e=>new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),w=e=>{let s=new Date,a=e.getTime()-s.getTime();if(a<=0)return"Expired";let t=Math.floor(a/36e5),i=Math.floor(a%36e5/6e4);if(t>24){let e=Math.floor(t/24);return"".concat(e," day").concat(1!==e?"s":""," remaining")}return t>0?"".concat(t," hour").concat(1!==t?"s":"",", ").concat(i," min").concat(1!==i?"s":""," remaining"):"".concat(i," minute").concat(1!==i?"s":""," remaining")};s.default=()=>{let e=(0,j.useRouter)(),{id:s}=e.query,{currentUser:a}=(0,N.a)(),[p,Z]=(0,i.useState)(null),[y,D]=(0,i.useState)(!0),[k,S]=(0,i.useState)(null),[M,T]=(0,i.useState)(""),[P,_]=(0,i.useState)(""),[C,E]=(0,i.useState)(!1),[A,B]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(!a){e.push("/login?redirect=/ngo/claim/"+s);return}if("ngo"!==a.role){e.push("/");return}if(s)try{let e=g(s);Z(e),D(!1)}catch(e){S("Failed to load food post details. Please try again."),D(!1)}},[s,a,e]);let q=async s=>{if(s.preventDefault(),!M){S("Please select a pickup time.");return}S(null),E(!0),setTimeout(()=>{E(!1),B(!0),setTimeout(()=>{e.push("/ngo/dashboard")},2e3)},1500)};return a&&"ngo"===a.role?y?(0,t.jsx)(f.Z,{title:"Loading Donation Details - MealMatch",children:(0,t.jsxs)(n.Z,{className:"py-5 text-center",children:[(0,t.jsx)(l.Z,{animation:"border",variant:"success"}),(0,t.jsx)("p",{className:"mt-3",children:"Loading donation details..."})]})}):k&&!p?(0,t.jsx)(f.Z,{title:"Error - MealMatch",children:(0,t.jsxs)(n.Z,{className:"py-5",children:[(0,t.jsx)(r.Z,{variant:"danger",children:k}),(0,t.jsx)("div",{className:"text-center mt-4",children:(0,t.jsx)(b(),{href:"/ngo/dashboard",children:(0,t.jsxs)(c.Z,{variant:"primary",children:[(0,t.jsx)(u.x_l,{className:"me-2"})," Return to Dashboard"]})})})]})}):A?(0,t.jsx)(f.Z,{title:"Claim Submitted - MealMatch",children:(0,t.jsxs)(n.Z,{className:"py-5 text-center",children:[(0,t.jsx)("div",{className:"d-inline-block p-4 bg-success text-white rounded-circle mb-4",children:(0,t.jsx)(u.fSQ,{size:48})}),(0,t.jsx)("h2",{children:"Your claim has been submitted!"}),(0,t.jsx)("p",{className:"mb-4",children:"We've notified the donor about your pickup request. You'll receive a confirmation soon."}),(0,t.jsx)(b(),{href:"/ngo/dashboard",children:(0,t.jsx)(c.Z,{variant:"primary",size:"lg",children:"Return to Dashboard"})})]})}):(0,t.jsx)(f.Z,{title:"Claim Donation: ".concat(null==p?void 0:p.title," - MealMatch"),description:"Claim available food donations",children:(0,t.jsxs)(n.Z,{className:"py-5",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(b(),{href:"/ngo/dashboard",className:"text-decoration-none",children:(0,t.jsxs)("span",{className:"d-flex align-items-center text-success",children:[(0,t.jsx)(u.x_l,{className:"me-2"})," Back to Dashboard"]})})}),(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(d.Z,{lg:8,className:"mb-4 mb-lg-0",children:(0,t.jsx)(m.Z,{className:"border-0 shadow-sm",children:(0,t.jsxs)(m.Z.Body,{className:"p-4",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h1",{className:"h3 fw-bold mb-2",children:p.title}),(0,t.jsxs)("div",{className:"d-flex flex-wrap align-items-center mb-3",children:[(0,t.jsx)(h.Z,{bg:"success",className:"me-2 mb-2",children:"Available Now"}),(0,t.jsxs)("div",{className:"d-flex align-items-center text-warning me-3 mb-2",children:[(0,t.jsx)(u.fSQ,{className:"me-1"}),(0,t.jsx)("small",{children:w(p.expiryTime)})]}),(0,t.jsxs)("div",{className:"d-flex align-items-center text-muted mb-2",children:[(0,t.jsx)(u.Nh4,{className:"me-1"}),(0,t.jsxs)("small",{children:[p.distance," away"]})]})]}),p.tags.map(e=>(0,t.jsx)(h.Z,{bg:"light",text:"dark",className:"me-1 mb-2",children:e},e))]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h5",{className:"fw-bold",children:"Description"}),(0,t.jsx)("p",{children:p.description})]}),(0,t.jsxs)(o.Z,{className:"mb-4",children:[(0,t.jsxs)(d.Z,{md:6,className:"mb-3 mb-md-0",children:[(0,t.jsx)("h5",{className:"fw-bold",children:"Quantity"}),(0,t.jsx)("p",{className:"mb-0",children:p.quantity})]}),(0,t.jsxs)(d.Z,{md:6,children:[(0,t.jsx)("h5",{className:"fw-bold",children:"Best Before"}),(0,t.jsx)("p",{className:"mb-0",children:v(p.expiryTime)})]})]}),(0,t.jsx)("h5",{className:"fw-bold",children:"Donor Information"}),(0,t.jsxs)("div",{className:"p-3 bg-light rounded mb-4",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,t.jsx)(u.Xws,{className:"text-muted me-2"}),(0,t.jsx)("span",{children:p.donorName})]}),(0,t.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,t.jsx)(u.DNl,{className:"text-muted me-2"}),(0,t.jsx)("span",{children:p.donorPhone})]}),(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsx)(u.Nh4,{className:"text-muted me-2"}),(0,t.jsx)("span",{children:p.fullAddress})]})]}),(0,t.jsx)("h5",{className:"fw-bold",children:"Pickup Instructions"}),(0,t.jsx)("p",{children:p.pickupInstructions})]})})}),(0,t.jsx)(d.Z,{lg:4,children:(0,t.jsx)(m.Z,{className:"border-0 shadow-sm sticky-top",style:{top:"20px"},children:(0,t.jsxs)(m.Z.Body,{className:"p-4",children:[(0,t.jsx)("h2",{className:"h4 fw-bold mb-4",children:"Claim This Donation"}),k&&(0,t.jsx)(r.Z,{variant:"danger",className:"mb-3",children:k}),(0,t.jsxs)(x.Z,{onSubmit:q,children:[(0,t.jsxs)(x.Z.Group,{className:"mb-4",controlId:"pickupTime",children:[(0,t.jsx)(x.Z.Label,{className:"fw-medium",children:"Select Pickup Time"}),(0,t.jsxs)(x.Z.Select,{value:M,onChange:e=>T(e.target.value),required:!0,children:[(0,t.jsx)("option",{value:"",children:"Choose a time..."}),p.availablePickupTimes.map(e=>(0,t.jsx)("option",{value:e.id,children:v(e.time)},e.id))]})]}),(0,t.jsxs)(x.Z.Group,{className:"mb-4",controlId:"additionalNotes",children:[(0,t.jsx)(x.Z.Label,{className:"fw-medium",children:"Additional Notes (Optional)"}),(0,t.jsx)(x.Z.Control,{as:"textarea",rows:3,placeholder:"Any special requests or information for the donor",value:P,onChange:e=>_(e.target.value)})]}),(0,t.jsx)("div",{className:"d-grid",children:(0,t.jsx)(c.Z,{variant:"success",type:"submit",size:"lg",disabled:C,children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Z,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Processing..."]}):"Claim Donation"})})]})]})})})]})]})}):(0,t.jsx)(f.Z,{title:"Loading - MealMatch",children:(0,t.jsx)(n.Z,{className:"py-5 text-center",children:(0,t.jsx)(l.Z,{animation:"border",variant:"success"})})})}}},function(e){e.O(0,[445,999,330,728,628,888,774,179],function(){return e(e.s=6231)}),_N_E=e.O()}]);