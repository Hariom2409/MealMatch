(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[446],{9728:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ngo/dashboard",function(){return a(2768)}])},3280:function(e,s,a){"use strict";var t=a(3967),i=a.n(t),n=a(7294),d=a(7400),r=a(5893);let l=n.forwardRef((e,s)=>{let{bsPrefix:a,bg:t="primary",pill:n=!1,text:l,className:c,as:o="span",...m}=e,h=(0,d.vE)(a,"badge");return(0,r.jsx)(o,{ref:s,...m,className:i()(c,h,n&&"rounded-pill",l&&"text-".concat(l),t&&"bg-".concat(t))})});l.displayName="Badge",s.Z=l},6346:function(e,s,a){"use strict";var t=a(3967),i=a.n(t),n=a(7294),d=a(7400),r=a(5893);let l=n.forwardRef((e,s)=>{let{bsPrefix:a,variant:t,animation:n="border",size:l,as:c="div",className:o,...m}=e;a=(0,d.vE)(a,"spinner");let h="".concat(a,"-").concat(n);return(0,r.jsx)(c,{ref:s,...m,className:i()(o,h,l&&"".concat(h,"-").concat(l),t&&"text-".concat(t))})});l.displayName="Spinner",s.Z=l},8287:function(e,s,a){"use strict";var t=a(3967),i=a.n(t),n=a(7294),d=a(7400),r=a(5893);let l=n.forwardRef((e,s)=>{let{bsPrefix:a,className:t,striped:n,bordered:l,borderless:c,hover:o,size:m,variant:h,responsive:x,...p}=e,u=(0,d.vE)(a,"table"),j=i()(t,u,h&&"".concat(u,"-").concat(h),m&&"".concat(u,"-").concat(m),n&&"".concat(u,"-").concat("string"==typeof n?"striped-".concat(n):"striped"),l&&"".concat(u,"-bordered"),c&&"".concat(u,"-borderless"),o&&"".concat(u,"-hover")),N=(0,r.jsx)("table",{...p,className:j,ref:s});if(x){let e="".concat(u,"-responsive");return"string"==typeof x&&(e="".concat(e,"-").concat(x)),(0,r.jsx)("div",{className:e,children:N})}return N});s.Z=l},2768:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return F}});var t=a(5893),i=a(7294),n=a(3280),d=a(7375),r=a(6346),l=a(525),c=a(6720),o=a(9101),m=a(8070),h=a(2121),x=a(3967),p=a.n(x),u=a(7400),j=a(6954),N=a(328);let g=i.forwardRef((e,s)=>{let{className:a,bsPrefix:i,as:n="span",...d}=e;return i=(0,u.vE)(i,"input-group-text"),(0,t.jsx)(n,{ref:s,className:p()(a,i),...d})});g.displayName="InputGroupText";let b=i.forwardRef((e,s)=>{let{bsPrefix:a,size:n,hasValidation:d,className:r,as:l="div",...c}=e;a=(0,u.vE)(a,"input-group");let o=(0,i.useMemo)(()=>({}),[]);return(0,t.jsx)(N.Z.Provider,{value:o,children:(0,t.jsx)(l,{ref:s,...c,className:p()(r,a,n&&"".concat(a,"-").concat(n),d&&"has-validation")})})});b.displayName="InputGroup";var y=Object.assign(b,{Text:g,Radio:e=>(0,t.jsx)(g,{children:(0,t.jsx)(j.Z,{type:"radio",...e})}),Checkbox:e=>(0,t.jsx)(g,{children:(0,t.jsx)(j.Z,{type:"checkbox",...e})})}),w=a(6236),v=a(8287),f=a(2914),Z=a(1664),D=a.n(Z),k=a(1163),T=a(3628),S=a(6197);a(109),a(8882);let B=[{id:"1",title:"Fresh Produce",quantity:"40 kg",description:"Mixed vegetables and fruits",postedByName:"Green Market",postedBy:"dummy-donor-1",distance:"1.2 km",location:{address:"123 Main Street",lat:37.7749,lng:-122.4194},expiryTime:new Date(Date.now()+864e5),preparedTime:new Date(Date.now()-108e5),createdAt:new Date(Date.now()-108e5),status:"available",isVegetarian:!0,isNonVegetarian:!1,isGlutenFree:!1,tags:["fruits","vegetables"]},{id:"2",title:"Prepared Meals",quantity:"25 servings",description:"Pasta with marinara sauce",postedByName:"Italian Restaurant",postedBy:"dummy-donor-2",distance:"3.5 km",location:{address:"456 Oak Avenue",lat:37.7739,lng:-122.4312},expiryTime:new Date(Date.now()+18e6),preparedTime:new Date(Date.now()-36e5),createdAt:new Date(Date.now()-36e5),status:"available",isVegetarian:!1,isNonVegetarian:!0,isGlutenFree:!1,tags:["ready-to-eat","cooked"]},{id:"3",title:"Bread Assortment",quantity:"30 loaves",description:"Various types of bread and pastries",postedByName:"Downtown Bakery",postedBy:"dummy-donor-3",distance:"0.8 km",location:{address:"789 Maple Road",lat:37.7729,lng:-122.4232},expiryTime:new Date(Date.now()+432e5),preparedTime:new Date(Date.now()-18e6),createdAt:new Date(Date.now()-18e6),status:"available",isVegetarian:!0,isNonVegetarian:!1,isGlutenFree:!1,tags:["bakery","bread"]},{id:"4",title:"Dairy Products",quantity:"15 items",description:"Milk, yogurt, and cheese",postedByName:"Local Grocery",postedBy:"dummy-donor-4",distance:"2.4 km",location:{address:"101 Pine Street",lat:37.7719,lng:-122.4292},expiryTime:new Date(Date.now()+1296e5),preparedTime:new Date(Date.now()-288e5),createdAt:new Date(Date.now()-288e5),status:"available",isVegetarian:!1,isNonVegetarian:!0,isGlutenFree:!0,tags:["dairy","refrigerated"]}],C=[{id:"5",title:"Catering Leftovers",quantity:"15 servings",description:"Various finger foods and appetizers",donorName:"Event Space",status:"scheduled",pickupTime:new Date(Date.now()+72e5),claimedAt:new Date(Date.now()-18e5)},{id:"6",title:"Rice and Beans",quantity:"20 kg",description:"Cooked rice and beans",donorName:"Mexican Restaurant",status:"completed",pickupTime:new Date(Date.now()-18e6),claimedAt:new Date(Date.now()-864e5)},{id:"7",title:"Sandwich Platters",quantity:"30 sandwiches",description:"Assorted sandwiches from conference",donorName:"Corporate Office",status:"completed",pickupTime:new Date(Date.now()-1728e5),claimedAt:new Date(Date.now()-2592e5)}],P={totalCollected:35,mealsProvided:450,peopleServed:175,wasteReduced:320},E=e=>new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),M=e=>{let{status:s}=e,a="secondary";return"scheduled"===s&&(a="primary"),"completed"===s&&(a="success"),"missed"===s&&(a="danger"),(0,t.jsx)(n.Z,{bg:a,className:"text-uppercase",children:s})};var F=()=>{let{currentUser:e}=(0,S.a)(),s=(0,k.useRouter)(),[a,x]=(0,i.useState)([]),[p,u]=(0,i.useState)(C),[j,N]=(0,i.useState)(P),[g,b]=(0,i.useState)(""),[Z,F]=(0,i.useState)(""),[A,L]=(0,i.useState)(!1),[R,G]=(0,i.useState)(null),[_,q]=(0,i.useState)(!1);(0,i.useEffect)(()=>{e?"ngo"!==e.role&&s.push("/"):s.push("/login?redirect=/ngo/dashboard")},[e,s]),(0,i.useEffect)(()=>{e&&(async()=>{try{L(!0),G(null),console.log("Using dummy data for NGO dashboard"),x(B),L(!1)}catch(e){console.error("Error loading food posts for NGO dashboard:",e),G("Failed to load food donations. Please try again later."),console.log("Falling back to dummy data due to error"),x(B),L(!1)}})()},[e]);let V=a.filter(e=>{let s=""===g||e.title.toLowerCase().includes(g.toLowerCase())||e.description.toLowerCase().includes(g.toLowerCase())||e.tags&&e.tags.some(e=>e.toLowerCase().includes(g.toLowerCase())),a=""===Z||"1"===Z&&1>=parseFloat(String(e.distance))||"5"===Z&&5>=parseFloat(String(e.distance))||"10"===Z&&10>=parseFloat(String(e.distance));return s&&a}),z=p.filter(e=>"scheduled"===e.status).sort((e,s)=>e.pickupTime.getTime()-s.pickupTime.getTime()),O=p.filter(e=>"completed"===e.status).sort((e,s)=>s.pickupTime.getTime()-e.pickupTime.getTime());return A&&!a.length?(0,t.jsx)(T.Z,{title:"Loading - MealMatch",children:(0,t.jsxs)(d.Z,{className:"py-5 text-center",children:[(0,t.jsx)(r.Z,{animation:"border",variant:"success"}),(0,t.jsx)("p",{className:"mt-3",children:"Loading food donations..."})]})}):R&&!a.length?(0,t.jsx)(T.Z,{title:"Error - MealMatch",children:(0,t.jsx)(d.Z,{className:"py-5",children:(0,t.jsxs)(l.Z,{variant:"danger",children:[(0,t.jsx)(l.Z.Heading,{children:"Error"}),(0,t.jsx)("p",{children:R}),(0,t.jsx)(c.Z,{variant:"outline-danger",onClick:()=>window.location.reload(),children:"Try Again"})]})})}):e&&"ngo"===e.role?(0,t.jsx)(T.Z,{title:"NGO Dashboard - MealMatch",description:"Find and claim available food donations",children:(0,t.jsxs)(d.Z,{className:"py-5",children:[(0,t.jsx)(o.Z,{className:"mb-4 align-items-center",children:(0,t.jsxs)(m.Z,{children:[(0,t.jsx)("h1",{className:"mb-0",children:"NGO Dashboard"}),(0,t.jsxs)("p",{className:"text-muted mb-0",children:["Welcome back, ",e.name]})]})}),(0,t.jsxs)(o.Z,{className:"mb-4",children:[(0,t.jsx)(m.Z,{md:3,className:"mb-3 mb-md-0",children:(0,t.jsx)(h.Z,{className:"border-0 shadow-sm h-100",children:(0,t.jsxs)(h.Z.Body,{className:"p-3 p-md-4 text-center",children:[(0,t.jsx)("div",{className:"display-4 fw-bold text-success mb-2",children:j.totalCollected}),(0,t.jsx)(h.Z.Text,{className:"text-muted mb-0",children:"Donations Collected"})]})})}),(0,t.jsx)(m.Z,{md:3,className:"mb-3 mb-md-0",children:(0,t.jsx)(h.Z,{className:"border-0 shadow-sm h-100",children:(0,t.jsxs)(h.Z.Body,{className:"p-3 p-md-4 text-center",children:[(0,t.jsx)("div",{className:"display-4 fw-bold text-primary mb-2",children:j.mealsProvided}),(0,t.jsx)(h.Z.Text,{className:"text-muted mb-0",children:"Meals Provided"})]})})}),(0,t.jsx)(m.Z,{md:3,className:"mb-3 mb-md-0",children:(0,t.jsx)(h.Z,{className:"border-0 shadow-sm h-100",children:(0,t.jsxs)(h.Z.Body,{className:"p-3 p-md-4 text-center",children:[(0,t.jsx)("div",{className:"display-4 fw-bold text-info mb-2",children:j.peopleServed}),(0,t.jsx)(h.Z.Text,{className:"text-muted mb-0",children:"People Served"})]})})}),(0,t.jsx)(m.Z,{md:3,className:"mb-3 mb-md-0",children:(0,t.jsx)(h.Z,{className:"border-0 shadow-sm h-100",children:(0,t.jsxs)(h.Z.Body,{className:"p-3 p-md-4 text-center",children:[(0,t.jsxs)("div",{className:"display-4 fw-bold text-success mb-2",children:[j.wasteReduced," kg"]}),(0,t.jsx)(h.Z.Text,{className:"text-muted mb-0",children:"Food Waste Reduced"})]})})})]}),(0,t.jsx)(o.Z,{className:"mb-4",children:(0,t.jsx)(m.Z,{children:(0,t.jsx)(h.Z,{className:"border-0 shadow-sm",children:(0,t.jsx)(h.Z.Body,{className:"p-4",children:(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(m.Z,{md:8,className:"mb-3 mb-md-0",children:(0,t.jsxs)(y,{children:[(0,t.jsx)(y.Text,{className:"bg-white",children:(0,t.jsx)(f.U41,{className:"text-muted"})}),(0,t.jsx)(w.Z.Control,{type:"text",placeholder:"Search by food type, description or tags...",value:g,onChange:e=>b(e.target.value)})]})}),(0,t.jsx)(m.Z,{md:4,children:(0,t.jsxs)(w.Z.Select,{value:Z,onChange:e=>F(e.target.value),"aria-label":"Filter by distance",children:[(0,t.jsx)("option",{value:"",children:"All Distances"}),(0,t.jsx)("option",{value:"1",children:"Within 1 km"}),(0,t.jsx)("option",{value:"5",children:"Within 5 km"}),(0,t.jsx)("option",{value:"10",children:"Within 10 km"})]})})]})})})})}),(0,t.jsx)(o.Z,{className:"mb-4",children:(0,t.jsx)(m.Z,{children:(0,t.jsxs)(h.Z,{className:"border-0 shadow-sm",children:[(0,t.jsx)(h.Z.Header,{className:"bg-white border-0 pt-4 pb-0 px-4",children:(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsx)(f.U41,{className:"text-success me-2",size:20}),(0,t.jsx)("h2",{className:"h5 fw-bold mb-0",children:"Available Donations"})]}),!1]})}),(0,t.jsxs)(h.Z.Body,{className:"p-4",children:[A&&(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)(r.Z,{animation:"border",variant:"success",size:"sm"}),(0,t.jsx)("p",{className:"mt-2 mb-0",children:"Loading donations..."})]}),A||0!==V.length?(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)(v.Z,{className:"align-middle",children:[(0,t.jsx)("thead",{className:"bg-light",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Food Items"}),(0,t.jsx)("th",{children:"Quantity"}),(0,t.jsx)("th",{children:"Donor"}),(0,t.jsx)("th",{children:"Location"}),(0,t.jsx)("th",{children:"Distance"}),(0,t.jsx)("th",{children:"Expires"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsx)("tbody",{children:V.map(e=>{var s;return(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{children:[(0,t.jsx)("div",{className:"fw-medium",children:e.title}),(0,t.jsx)("small",{className:"text-muted d-block",children:e.description}),e.tags&&e.tags.map(e=>(0,t.jsx)(n.Z,{bg:"light",text:"dark",className:"me-1 mt-1",children:e},e))]}),(0,t.jsx)("td",{children:e.quantity}),(0,t.jsx)("td",{children:e.postedByName}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsx)(f.Nh4,{className:"text-danger me-1",size:14}),(null===(s=e.location)||void 0===s?void 0:s.address)||"Unknown location"]})}),(0,t.jsx)("td",{children:e.distance}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsx)(f.fSQ,{className:"text-warning me-1",size:14}),E(e.expiryTime)]})}),(0,t.jsx)("td",{children:(0,t.jsx)(D(),{href:"/ngo/claim/".concat(e.id),children:(0,t.jsx)(c.Z,{size:"sm",variant:"success",children:"Claim"})})})]},e.id)})})]})}):(0,t.jsx)(l.Z,{variant:"light",className:"text-center",children:"No available food donations match your search criteria."})]})]})})}),(0,t.jsx)(o.Z,{className:"mb-4",children:(0,t.jsx)(m.Z,{children:(0,t.jsxs)(h.Z,{className:"border-0 shadow-sm",children:[(0,t.jsx)(h.Z.Header,{className:"bg-white border-0 pt-4 pb-0 px-4",children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsx)(f.Zlo,{className:"text-primary me-2",size:20}),(0,t.jsx)("h2",{className:"h5 fw-bold mb-0",children:"Scheduled Pickups"})]})}),(0,t.jsx)(h.Z.Body,{className:"p-4",children:0===z.length?(0,t.jsx)(l.Z,{variant:"light",className:"text-center",children:"No scheduled pickups at the moment."}):(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)(v.Z,{className:"align-middle",children:[(0,t.jsx)("thead",{className:"bg-light",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Food Items"}),(0,t.jsx)("th",{children:"Quantity"}),(0,t.jsx)("th",{children:"Donor"}),(0,t.jsx)("th",{children:"Pickup Time"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsx)("tbody",{children:z.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"fw-medium",children:e.title}),(0,t.jsx)("td",{children:e.quantity}),(0,t.jsx)("td",{children:e.postedByName||e.donorName}),(0,t.jsx)("td",{children:E(e.pickupTime)}),(0,t.jsx)("td",{children:(0,t.jsx)(M,{status:e.status})}),(0,t.jsx)("td",{children:(0,t.jsx)(D(),{href:"/ngo/pickup/".concat(e.id),children:(0,t.jsx)(c.Z,{size:"sm",variant:"outline-primary",children:"Details"})})})]},e.id))})]})})})]})})}),(0,t.jsx)(o.Z,{children:(0,t.jsx)(m.Z,{children:(0,t.jsxs)(h.Z,{className:"border-0 shadow-sm",children:[(0,t.jsx)(h.Z.Header,{className:"bg-white border-0 pt-4 pb-0 px-4",children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsx)(f.ceS,{className:"text-success me-2",size:20}),(0,t.jsx)("h2",{className:"h5 fw-bold mb-0",children:"Completed Pickups"})]})}),(0,t.jsx)(h.Z.Body,{className:"p-4",children:0===O.length?(0,t.jsx)(l.Z,{variant:"light",className:"text-center",children:"No completed pickups yet."}):(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)(v.Z,{className:"align-middle",children:[(0,t.jsx)("thead",{className:"bg-light",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Food Items"}),(0,t.jsx)("th",{children:"Quantity"}),(0,t.jsx)("th",{children:"Donor"}),(0,t.jsx)("th",{children:"Pickup Time"}),(0,t.jsx)("th",{children:"Status"})]})}),(0,t.jsx)("tbody",{children:O.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"fw-medium",children:e.title}),(0,t.jsx)("td",{children:e.quantity}),(0,t.jsx)("td",{children:e.postedByName||e.donorName}),(0,t.jsx)("td",{children:E(e.pickupTime)}),(0,t.jsx)("td",{children:(0,t.jsx)(M,{status:e.status})})]},e.id))})]})})})]})})})]})}):(0,t.jsx)(T.Z,{title:"Loading - MealMatch",children:(0,t.jsx)(d.Z,{className:"py-5 text-center",children:(0,t.jsx)("div",{className:"spinner-border text-success",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})})}}},function(e){e.O(0,[445,999,330,728,628,888,774,179],function(){return e(e.s=9728)}),_N_E=e.O()}]);