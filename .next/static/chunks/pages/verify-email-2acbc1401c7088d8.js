(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70],{3541:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify-email",function(){return a(1987)}])},525:function(e,r,a){"use strict";a.d(r,{Z:function(){return N}});var t=a(3967),s=a.n(t),n=a(7294),l=a(5446),i=a(1176),c=a(7400),d=a(9106),o=a(5893);let u=(0,d.Z)("h4");u.displayName="DivStyledAsH4";let f=n.forwardRef((e,r)=>{let{className:a,bsPrefix:t,as:n=u,...l}=e;return t=(0,c.vE)(t,"alert-heading"),(0,o.jsx)(n,{ref:r,className:s()(a,t),...l})});f.displayName="AlertHeading";var m=a(4079);let v=n.forwardRef((e,r)=>{let{className:a,bsPrefix:t,as:n=m.Z,...l}=e;return t=(0,c.vE)(t,"alert-link"),(0,o.jsx)(n,{ref:r,className:s()(a,t),...l})});v.displayName="AlertLink";var h=a(3730),x=a(4749);let y=n.forwardRef((e,r)=>{let{bsPrefix:a,show:t=!0,closeLabel:n="Close alert",closeVariant:d,className:u,children:f,variant:m="primary",onClose:v,dismissible:y,transition:N=h.Z,...j}=(0,l.Ch)(e,{show:"onClose"}),p=(0,c.vE)(a,"alert"),g=(0,i.Z)(e=>{v&&v(!1,e)}),E=!0===N?h.Z:N,Z=(0,o.jsxs)("div",{role:"alert",...E?void 0:j,ref:r,className:s()(u,p,m&&"".concat(p,"-").concat(m),y&&"".concat(p,"-dismissible")),children:[y&&(0,o.jsx)(x.Z,{onClick:g,"aria-label":n,variant:d}),f]});return E?(0,o.jsx)(E,{unmountOnExit:!0,...j,ref:void 0,in:t,children:Z}):t?Z:null});y.displayName="Alert";var N=Object.assign(y,{Link:v,Heading:f})},2121:function(e,r,a){"use strict";a.d(r,{Z:function(){return E}});var t=a(3967),s=a.n(t),n=a(7294),l=a(7400),i=a(5893);let c=n.forwardRef((e,r)=>{let{className:a,bsPrefix:t,as:n="div",...c}=e;return t=(0,l.vE)(t,"card-body"),(0,i.jsx)(n,{ref:r,className:s()(a,t),...c})});c.displayName="CardBody";let d=n.forwardRef((e,r)=>{let{className:a,bsPrefix:t,as:n="div",...c}=e;return t=(0,l.vE)(t,"card-footer"),(0,i.jsx)(n,{ref:r,className:s()(a,t),...c})});d.displayName="CardFooter";var o=a(7762);let u=n.forwardRef((e,r)=>{let{bsPrefix:a,className:t,as:c="div",...d}=e,u=(0,l.vE)(a,"card-header"),f=(0,n.useMemo)(()=>({cardHeaderBsPrefix:u}),[u]);return(0,i.jsx)(o.Z.Provider,{value:f,children:(0,i.jsx)(c,{ref:r,...d,className:s()(t,u)})})});u.displayName="CardHeader";let f=n.forwardRef((e,r)=>{let{bsPrefix:a,className:t,variant:n,as:c="img",...d}=e,o=(0,l.vE)(a,"card-img");return(0,i.jsx)(c,{ref:r,className:s()(n?"".concat(o,"-").concat(n):o,t),...d})});f.displayName="CardImg";let m=n.forwardRef((e,r)=>{let{className:a,bsPrefix:t,as:n="div",...c}=e;return t=(0,l.vE)(t,"card-img-overlay"),(0,i.jsx)(n,{ref:r,className:s()(a,t),...c})});m.displayName="CardImgOverlay";let v=n.forwardRef((e,r)=>{let{className:a,bsPrefix:t,as:n="a",...c}=e;return t=(0,l.vE)(t,"card-link"),(0,i.jsx)(n,{ref:r,className:s()(a,t),...c})});v.displayName="CardLink";var h=a(9106);let x=(0,h.Z)("h6"),y=n.forwardRef((e,r)=>{let{className:a,bsPrefix:t,as:n=x,...c}=e;return t=(0,l.vE)(t,"card-subtitle"),(0,i.jsx)(n,{ref:r,className:s()(a,t),...c})});y.displayName="CardSubtitle";let N=n.forwardRef((e,r)=>{let{className:a,bsPrefix:t,as:n="p",...c}=e;return t=(0,l.vE)(t,"card-text"),(0,i.jsx)(n,{ref:r,className:s()(a,t),...c})});N.displayName="CardText";let j=(0,h.Z)("h5"),p=n.forwardRef((e,r)=>{let{className:a,bsPrefix:t,as:n=j,...c}=e;return t=(0,l.vE)(t,"card-title"),(0,i.jsx)(n,{ref:r,className:s()(a,t),...c})});p.displayName="CardTitle";let g=n.forwardRef((e,r)=>{let{bsPrefix:a,className:t,bg:n,text:d,border:o,body:u=!1,children:f,as:m="div",...v}=e,h=(0,l.vE)(a,"card");return(0,i.jsx)(m,{ref:r,...v,className:s()(t,h,n&&"bg-".concat(n),d&&"text-".concat(d),o&&"border-".concat(o)),children:u?(0,i.jsx)(c,{children:f}):f})});g.displayName="Card";var E=Object.assign(g,{Img:f,Title:p,Subtitle:y,Body:c,Link:v,Text:N,Header:u,Footer:d,ImgOverlay:m})},6346:function(e,r,a){"use strict";var t=a(3967),s=a.n(t),n=a(7294),l=a(7400),i=a(5893);let c=n.forwardRef((e,r)=>{let{bsPrefix:a,variant:t,animation:n="border",size:c,as:d="div",className:o,...u}=e;a=(0,l.vE)(a,"spinner");let f="".concat(a,"-").concat(n);return(0,i.jsx)(d,{ref:r,...u,className:s()(o,f,c&&"".concat(f,"-").concat(c),t&&"text-".concat(t))})});c.displayName="Spinner",r.Z=c},1987:function(e,r,a){"use strict";a.r(r);var t=a(5893),s=a(7294),n=a(7375),l=a(6346),i=a(9101),c=a(8070),d=a(2121),o=a(525),u=a(6720),f=a(1163),m=a(6197),v=a(3628);r.default=()=>{let{currentUser:e,sendVerificationEmail:r,isEmailVerified:a,refreshUserState:h}=(0,m.a)(),x=(0,f.useRouter)(),[y,N]=(0,s.useState)(!0),[j,p]=(0,s.useState)(!1),[g,E]=(0,s.useState)(!1),[Z,b]=(0,s.useState)(null),[w,k]=(0,s.useState)(0),C=(0,s.useRef)(null),R=(0,s.useRef)(!1);(0,s.useEffect)(()=>{if(!e){x.push("/login?redirect=/verify-email");return}return(async()=>{try{if(await h(),a()&&!R.current){R.current=!0;let r="donor"===e.role?"/donor/dashboard":"/recipient/dashboard";x.push(r)}else N(!1)}catch(e){console.error("Error checking verification status:",e),N(!1)}})(),()=>{C.current&&(clearInterval(C.current),C.current=null)}},[e,a,h,x]),(0,s.useEffect)(()=>{if(e&&!y&&!R.current)return C.current&&clearInterval(C.current),C.current=setInterval(async()=>{try{if(await h(),a()&&!R.current){R.current=!0;let r="donor"===e.role?"/donor/dashboard":"/recipient/dashboard";x.push(r),C.current&&(clearInterval(C.current),C.current=null)}}catch(e){console.error("Error in verification check interval:",e)}},5e3),()=>{C.current&&(clearInterval(C.current),C.current=null)}},[e,a,y,h,x]),(0,s.useEffect)(()=>{if(w<=0)return;let e=setTimeout(()=>{k(w-1)},1e3);return()=>clearTimeout(e)},[w]);let _=async()=>{if(!j&&!(w>0)){p(!0),E(!1),b(null);try{await r(),E(!0),k(60)}catch(e){console.error("Error sending verification email:",e),b(e.message||"Failed to send verification email")}finally{p(!1)}}};return y?(0,t.jsx)(v.Z,{title:"Verify Email - MealMatch",children:(0,t.jsx)(n.Z,{className:"py-5 text-center",children:(0,t.jsx)(l.Z,{animation:"border",variant:"success"})})}):(0,t.jsx)(v.Z,{title:"Verify Email - MealMatch",children:(0,t.jsx)(n.Z,{className:"py-5",children:(0,t.jsx)(i.Z,{className:"justify-content-center",children:(0,t.jsx)(c.Z,{md:8,lg:6,children:(0,t.jsx)(d.Z,{className:"shadow-sm border-0",children:(0,t.jsxs)(d.Z.Body,{className:"p-4 p-md-5",children:[(0,t.jsx)("h2",{className:"text-center mb-4",children:"Verify Your Email"}),(0,t.jsxs)("div",{className:"text-center mb-4",children:[(0,t.jsx)("div",{className:"verify-icon mb-3",children:(0,t.jsx)("i",{className:"fas fa-envelope-open-text fa-3x text-primary"})}),(0,t.jsxs)("p",{children:["We've sent a verification email to: ",(0,t.jsx)("br",{}),(0,t.jsx)("strong",{children:null==e?void 0:e.email})]}),(0,t.jsx)("p",{className:"text-muted",children:"Click the link in the email to verify your account. Please check your spam folder if you don't see it."})]}),Z&&(0,t.jsx)(o.Z,{variant:"danger",children:Z}),g&&(0,t.jsx)(o.Z,{variant:"success",children:"Verification email sent successfully!"}),(0,t.jsxs)("div",{className:"d-grid gap-3",children:[(0,t.jsx)(u.Z,{variant:"primary",onClick:_,disabled:j||w>0,children:j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Z,{animation:"border",size:"sm",className:"me-2"}),"Sending..."]}):w>0?"Resend Email (".concat(w,"s)"):"Resend Verification Email"}),(0,t.jsx)(u.Z,{variant:"outline-secondary",onClick:()=>x.push("/login"),children:"Back to Login"})]}),(0,t.jsx)("div",{className:"mt-4 text-center",children:(0,t.jsx)("p",{className:"text-muted small",children:"Already verified? Try refreshing the page or logging in again."})})]})})})})})})}}},function(e){e.O(0,[445,999,330,628,888,774,179],function(){return e(e.s=3541)}),_N_E=e.O()}]);