(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3236:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return a(1123)}])},1123:function(e,s,a){"use strict";a.r(s);var n=a(5893),t=a(7294),r=a(7375),i=a(9101),l=a(8070),c=a(2121),o=a(525),d=a(6236),u=a(6720),h=a(1163),m=a(1664),x=a.n(m),j=a(2914),p=a(9008),g=a.n(p),N=a(6197),f=a(3628);s.default=()=>{let[e,s]=(0,t.useState)(""),[a,m]=(0,t.useState)(""),[p,w]=(0,t.useState)(""),[v,y]=(0,t.useState)(!1),[b,Z]=(0,t.useState)(!1),k=(0,h.useRouter)(),{login:_,loginWithGoogle:C,resetPassword:S,isEmailVerified:E,refreshUserState:P}=(0,N.a)(),F=k.query.redirect||"/",L=(0,t.useRef)(!1),R=async s=>{if(s.preventDefault(),b){try{w(""),y(!0),await S(e),y(!1),alert("Password reset email sent! Check your inbox."),Z(!1)}catch(e){y(!1),w("Failed to reset password: "+e.message)}return}try{if(w(""),y(!0),await _(e,a),await P(),L.current)return;L.current=!0,E()?k.push(F):k.push("/verify-email")}catch(e){y(!1),w("Failed to log in: "+e.message),L.current=!1}},G=async()=>{try{if(w(""),y(!0),await C(),await P(),L.current)return;L.current=!0,E()?k.push(F):k.push("/verify-email")}catch(e){y(!1),w("Failed to log in with Google: "+e.message),L.current=!1}};return(0,n.jsxs)(f.Z,{children:[(0,n.jsxs)(g(),{children:[(0,n.jsx)("title",{children:"Login - MealMatch"}),(0,n.jsx)("meta",{name:"description",content:"Log in to your MealMatch account"})]}),(0,n.jsx)("section",{className:"auth-section py-5",children:(0,n.jsx)(r.Z,{children:(0,n.jsx)(i.Z,{className:"justify-content-center",children:(0,n.jsx)(l.Z,{lg:5,md:8,children:(0,n.jsxs)(c.Z,{className:"border-0 shadow-lg rounded-4 overflow-hidden",children:[(0,n.jsxs)("div",{className:"text-center pt-4 pb-3",children:[(0,n.jsx)("h1",{className:"h3 fw-bold",children:b?"Reset Password":"Welcome Back"}),(0,n.jsx)("p",{className:"text-muted",children:b?"Enter your email to receive reset instructions":"Sign in to your account"})]}),(0,n.jsxs)(c.Z.Body,{className:"p-4 p-md-5",children:[p&&(0,n.jsx)(o.Z,{variant:"danger",children:p}),(0,n.jsxs)(d.Z,{onSubmit:R,children:[(0,n.jsx)(d.Z.Group,{className:"mb-4",controlId:"email",children:(0,n.jsxs)("div",{className:"form-floating",children:[(0,n.jsx)(d.Z.Control,{type:"email",placeholder:"Email address",value:e,onChange:e=>s(e.target.value),required:!0,className:"form-control-lg"}),(0,n.jsx)(d.Z.Label,{children:"Email address"})]})}),!b&&(0,n.jsx)(d.Z.Group,{className:"mb-4",controlId:"password",children:(0,n.jsxs)("div",{className:"form-floating",children:[(0,n.jsx)(d.Z.Control,{type:"password",placeholder:"Password",value:a,onChange:e=>m(e.target.value),required:!0,className:"form-control-lg"}),(0,n.jsx)(d.Z.Label,{children:"Password"})]})}),!b&&(0,n.jsx)("div",{className:"d-flex justify-content-end mb-4",children:(0,n.jsx)(u.Z,{variant:"link",className:"p-0 text-decoration-none text-primary",onClick:()=>Z(!0),children:"Forgot password?"})}),(0,n.jsx)("div",{className:"d-grid mb-4",children:(0,n.jsx)(u.Z,{type:"submit",variant:"primary",size:"lg",disabled:v,className:"btn-action",children:v?"Please wait...":b?"Send Reset Link":"Sign In"})}),b&&(0,n.jsx)("div",{className:"text-center mb-4",children:(0,n.jsx)(u.Z,{variant:"link",className:"text-decoration-none",onClick:()=>Z(!1),children:"Back to login"})}),!b&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"divider-with-text my-4",children:(0,n.jsx)("span",{children:"OR"})}),(0,n.jsx)("div",{className:"d-grid mb-4",children:(0,n.jsxs)(u.Z,{variant:"outline-secondary",size:"lg",onClick:G,disabled:v,className:"btn-social",children:[(0,n.jsx)(j.ldW,{className:"me-2"})," Continue with Google"]})})]}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)("p",{className:"mb-0",children:["Don't have an account?"," ",(0,n.jsx)(x(),{href:"/register",className:"text-decoration-none fw-semibold",children:"Sign up"})]})})]})]})]})})})})})]})}}},function(e){e.O(0,[445,999,330,728,628,888,774,179],function(){return e(e.s=3236)}),_N_E=e.O()}]);